{"md5":"c3503911ccb820e8d26cae9e8f91c333","content":"\n\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><span class=\"section-number-2\">1</span> 源码下载</h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<div class=\"org-src-container\">\n\n<figure class=\"highlight sh\"><table><tr><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:llvm-mirror/clang.git</span><br></pre></td></tr></table></figure>\n</div>\n<p>\n虽然也有svn代码仓库，但我这里使用git上\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><span class=\"section-number-2\">2</span> Clang Driver</h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<p>\n先看看官网的Driver设计图：\n<img src=\"./Clang源码剖析/clang_driver.jpg\" alt=\"clang_driver.jpg\">\n可以看到绿色的是实际的Driver Function，所以分析Driver关键是绿色的单元。\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\"><span class=\"section-number-2\">3</span> clang的使用</h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\nclang -cc1代表Clang前端，而clang则代表Clang Driver。\nclang预处理C语言后的生成的文件后缀是.i，而处理C++文件后的文件后缀是.ii文件。\nclang的-ccc-print-phases选项\n</p>\n</div>\n<div id=\"outline-container-sec-3-1\" class=\"outline-3\">\n<h3 id=\"sec-3-1\"><span class=\"section-number-3\">3.1</span> Clang的Pipeline</h3>\n<div class=\"outline-text-3\" id=\"text-3-1\">\n<p>\nPipeline的作用是根据具体的编译选项，构建不同的Compiler Action。利用-ccc-print-phases选项就是打印的Compiler Action\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-3-2\" class=\"outline-3\">\n<h3 id=\"sec-3-2\"><span class=\"section-number-3\">3.2</span> Clang的Bind</h3>\n<div class=\"outline-text-3\" id=\"text-3-2\">\n<p>\nBind的作用是Tool和Filename的选择提供。Bind为我们提供具体的Tool来运行Action。Bind与Toolchain沟通，Toolchain负责选择具体的Tool来完成一系列操作。Filename是进行IPC时候的文件名。\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-3-3\" class=\"outline-3\">\n<h3 id=\"sec-3-3\"><span class=\"section-number-3\">3.3</span> Clang的Translate</h3>\n<div class=\"outline-text-3\" id=\"text-3-3\">\n<p>\n翻译工具的选项参数，如ld在不同的平台上是不一样的。\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-3-4\" class=\"outline-3\">\n<h3 id=\"sec-3-4\"><span class=\"section-number-3\">3.4</span> Clang的Execute</h3>\n<div class=\"outline-text-3\" id=\"text-3-4\">\n<p>\n执行整个编译，执行编译流程\n</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\"><span class=\"section-number-2\">4</span> 零散</h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n</div><div id=\"outline-container-sec-4-1\" class=\"outline-3\">\n<h3 id=\"sec-4-1\"><span class=\"section-number-3\">4.1</span> </h3>\n</div>\n</div>\n<div id=\"outline-container-sec-5\" class=\"outline-2\">\n<h2 id=\"sec-5\"><span class=\"section-number-2\">5</span> 参考</h2>\n<div class=\"outline-text-2\" id=\"text-5\">\n<ul class=\"org-ul\">\n<li><a href=\"https://zhuanlan.zhihu.com/p/22974869\">谁说不能与龙一起跳舞：Clang / LLVM (2)</a>\n</li>\n<li></li>\n<li><a href=\"http://clang.llvm.org/get_started.html\">Getting Started: Building and Running Clang</a>\n</li>\n</ul>\n</div>\n</div>\n\nLast Updated 2017-11-09 四 01:23.<br>Render by <a href=\"https://github.com/CodeFalling/hexo-renderer-org\">hexo-renderer-org</a> with <a href=\"http://www.gnu.org/software/emacs/\">Emacs</a> 25.3.1 (<a href=\"http://orgmode.org\">Org</a> mode 8.2.10)\n"}
