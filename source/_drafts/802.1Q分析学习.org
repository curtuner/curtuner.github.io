#+TITLE: 802.1Q分析学习
#+DATE: 2017-03-16
#+LAYOUT: post
#+TAGS: Network
#+CATEGORIES: Network

* 概述
  802.1Q协议规定了VLAN的实现，
* TODO VLAN成员定义的方法
  核心问题在于维护MAC地址和VLAN的映射
** 使用交换机的端口来划分
   指定一台交换机端口所属的VLAN。对于多个交换机的情形
** MAC地址划分VLAN
   一个大的问题是配置难度，一一映射的构造和修改是各大工程
** 根据网络层划分VLAN
   如使用IP地址或者协议，但是实际上可以用
** IP组播作为VLAN
* 交换机和以太网
* TODO 关键问题
** TODO 交换机如何沟通VLAN信息
* TODO 802.1Q协议
** TODO 协议二进制数据格式
   在以太网帧源地址后增加了一个4字节的802.1Q桢头。其中分为两部分，2个字节的标签控制标识TPID，和标签控制信息
** TODO 实现了交换机的网络的工作流程
*** 接收数据
    看以太网帧是否有802.1Q字段，没有则根据端口添加
*** 发送数据
* 思考
  - 不同
* FAQ
** PVID的含义？
   PVID为Port-base Vlan ID，也就是端口的虚拟局域网ID号，关系到端口收发数据帧时的VLAN TAG 标记
** 计算机如何实现802.1Q？
   计算机一般还不能处理包含该信息的帧，802.1Q帧由交换机来处理
** VLAN只在交换机中吗？
   不是，也有用路由器的实现
** 线速转发？
   端口在满负载的情况下，对帧进行无差错的转发称为线速转发。
* 未来有价值但目前不完整的点
  交换机一般通过交换芯片转发数据，路由器是通过CPU转发的
* 参考文献
  - http://www.net130.com/netbass/netmanger/20040519031.htm
