#+TITLE: 网络和SDN
#+DATE: 2017-03-24
#+LAYOUT: post
#+TAGS: Network
#+CATEGORIES: Network

* 历史轨迹
** 现今网络的发展
*** 分组交换
   经典的通信方式包括电话和电报，在计算机网络中，前者的问题是过度占用信道资源，后者的问题是一旦发送的电报就不能中断。两者都存在信道的不合理分配问题，这里的问题在于分配的粒度，前者的粒度是信道，后者是数据报。可以注意到当数据报过长时其实与占用一个信道没太大区别。所以关键在于为数据报设定一个最大的尺寸，这样才可以保证在小粒度上分配信道，也就是今天的分组交换。在此基础上我们再模拟电报和电话的通信，模拟电话的就是今天的TCP协议，模拟电报的就是UDP以及ICMP协议。
*** TODO TCP/IP协议栈
    有了交换方法之后，我们还需要有标识接收方和发送方位置的的方法，IP地址便是解决方法之一，但是后来主机数目远远超过了IP的数目，虽然通过NAT等手段缓解了这个问题，但目前看来IPv6才是最终解决方案。这么看来还不如一开始就使用IPv6呢，只是谁想得到呢？
    TCP/IP协议栈的出现某种程度上反映了当年编码的不易，这点看看有多少层就知道了，当年的程序员毫无疑问在不断追求代码的复用。OSI参考模型甚至将网络分成了七层：物理层，数据链路层，网络层，传输层，会话层，表示层，应用层。当然还好没有被实现。由于TCP/IP协议的的广泛使用，它已经成为事实上的标准，而它只包含5层。其中最底层物理层是直接和电路相关的，使用专门的电路来实现解码和编码，对于我们来说只要知道物理层是做什么的即可，而要重点了解的只有上面四层。数据链路层，最重要的协议是以太网协议，无线的话是802.11，它们的特点都是在物理层比较讲究，光是了解就要化很多时间，当然无需在意，我们只需关注数据链路层的问题即可。MAC地址是网卡固有的地址，用于数据链路层的定位数据包的发送和接收。比IP幸运，它有6个字节，目前还够用。以前的以太网是以广播的形式发送给子网的所有机器，所以目的MAC地址放在以太网帧的最前面，便于接收方判断数据包是否是给自己的。MAC地址所标识的网络我们称为二层网络。为了对一个二层网络进行划分，出现了802.1Q协议，其目的在于隔离二层网络。我觉得它应该知识对以太网协议的一个补充。所以它的控制信息在源地址的后面的四个字节，叫802.1QTAG。到了IP层的相关的协议不多，一般会提到IP(v4)和IPv6。IP协议是比较复杂的协议，其帧的格式比叫复杂，它主要支持几个功能：
    1) IP包头变长
    2) 分片下
    3) checksum
*** TODO 交换技术
*** OpenFlow
*** 虚拟局域网（vlan）
* SDN
  SDN的思想是让软件直接管理转发控制，按照需要不断改变转发策略，只要交换机遵守openflow协议。软件给交换机下的指令，比如目的MAC地址为A则转发去2号端口，就叫做流表，它是Openflow交换机转发控制的基本单位。使用的软件叫控制器
* 参考
  - [[https://zhuanlan.zhihu.com/p/21875624][网络、交换技术与OpenFlow]]
